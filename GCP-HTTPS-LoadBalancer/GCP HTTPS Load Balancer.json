{"content":"{\"cells\":[{\"type\":\"devs.PMStartPoint\",\"size\":{\"width\":40,\"height\":39},\"outPorts\":[\" \"],\"inPorts\":[],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\" \"}}}]},\"position\":{\"x\":-926,\"y\":-280},\"angle\":0,\"id\":\"17d2d217-ba89-4c4d-9dcb-af6663060420\",\"z\":1,\"attrs\":{\"rect\":{\"fill\":\"#2d3236\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-798,\"y\":-302},\"angle\":0,\"id\":\"66a3b27b-2c9c-4fd5-ab9c-df91250e30fe\",\"z\":2,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Configure gsutils\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Configure gsutils\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-631,\"y\":-42},\"angle\":0,\"id\":\"8bced2be-aa05-4018-85aa-84a27e87b985\",\"z\":33,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Create URL map\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Create URL map\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-621,\"y\":-304},\"angle\":0,\"id\":\"b63c01cd-3bf1-468f-91bc-e973905f5371\",\"z\":40,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Set Project\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Set Project\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-804,\"y\":-44},\"angle\":0,\"id\":\"59cc84f2-9a52-4698-a5e6-fa7658128f3b\",\"z\":42,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Create Backend Backet\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Create Backend Backet\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-448,\"y\":-51},\"angle\":0,\"id\":\"a2e4bf34-453c-4f0b-b100-2340cf7836dd\",\"z\":45,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Configure URL map\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Configure URL map\"}}},{\"type\":\"link\",\"source\":{\"id\":\"8bced2be-aa05-4018-85aa-84a27e87b985\",\"port\":\"  \"},\"target\":{\"id\":\"a2e4bf34-453c-4f0b-b100-2340cf7836dd\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"b2740217-48ec-4681-b38c-ed21e3a969be\",\"z\":46,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-632,\"y\":79},\"angle\":0,\"id\":\"7f6b6c5e-af70-434b-9786-f91ddf27c7d7\",\"z\":47,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"HTTPS Target Proxy\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"HTTPS Target Proxy\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-74,\"y\":74},\"angle\":0,\"id\":\"6ae458d9-2718-4778-ac42-f7003b5e52fa\",\"z\":49,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"HTTP Create Forwarding Rules\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"HTTP Create Forwarding Rules\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-806,\"y\":-172},\"angle\":0,\"id\":\"c022d3e9-c705-4db8-a815-9b2439927a29\",\"z\":51,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Create IP\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Create IP\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-628,\"y\":-169},\"angle\":0,\"id\":\"955b5628-0de1-420f-9483-7d0e74ac2b61\",\"z\":52,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Output IP\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Output IP\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-812,\"y\":86},\"angle\":0,\"id\":\"a922e638-9541-451f-b33c-b7962189aabd\",\"z\":61,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Create SSL\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Create SSL\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-436,\"y\":-178},\"angle\":0,\"id\":\"0f3732f7-d7c0-40b7-a223-f8818dd0b2e6\",\"z\":62,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Create Zone\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Create Zone\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-259,\"y\":-173},\"angle\":0,\"id\":\"317675e7-4242-4712-b435-97f804f743dd\",\"z\":64,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Create A\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Create A\"}}},{\"type\":\"link\",\"source\":{\"id\":\"0f3732f7-d7c0-40b7-a223-f8818dd0b2e6\",\"port\":\"  \"},\"target\":{\"id\":\"317675e7-4242-4712-b435-97f804f743dd\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"74f31b0d-a9f8-4f71-807b-14a4e6a32705\",\"z\":65,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"a2e4bf34-453c-4f0b-b100-2340cf7836dd\",\"port\":\"  \"},\"target\":{\"id\":\"a922e638-9541-451f-b33c-b7962189aabd\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"f9e21d7c-f330-49f8-92bf-a309170012d7\",\"z\":134,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":288,\"y\":70},\"angle\":0,\"id\":\"d8fdb2f2-a865-4389-a1af-ca9e03a4cba6\",\"z\":139,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Check SSL Status\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Check SSL Status\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":461,\"y\":67},\"angle\":0,\"id\":\"779f8c91-4aa5-4ddc-a73c-7c7252e8988a\",\"z\":141,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Wait if SSL is provisiong\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Wait if SSL is provisiong\"}}},{\"type\":\"link\",\"source\":{\"id\":\"d8fdb2f2-a865-4389-a1af-ca9e03a4cba6\",\"port\":\"  \"},\"target\":{\"id\":\"779f8c91-4aa5-4ddc-a73c-7c7252e8988a\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"d1a2c360-827a-467e-b7da-c9b4a4441d24\",\"z\":142,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-450,\"y\":-305},\"angle\":0,\"id\":\"a190db8d-6d25-47ca-9f41-6b452c162d3f\",\"z\":144,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Enable Compute Service\"},\".p_id\":{\"text\":\"61ddc8953d948b00323f6772\"},\"image\":{\"xlink:href\":\"/plugins/GCP-Services/icon.png\",\"ref-y\":50},\"text\":{\"text\":\"Enable Compute Service\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-286,\"y\":-310},\"angle\":0,\"id\":\"b45c34f4-3936-45de-979f-247c50b2d5aa\",\"z\":148,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Enable DNS Service\"},\".p_id\":{\"text\":\"61ddc8953d948b00323f6772\"},\"image\":{\"xlink:href\":\"/plugins/GCP-Services/icon.png\",\"ref-y\":50},\"text\":{\"text\":\"Enable DNS Service\"}}},{\"type\":\"link\",\"source\":{\"id\":\"59cc84f2-9a52-4698-a5e6-fa7658128f3b\",\"port\":\"  \"},\"target\":{\"id\":\"8bced2be-aa05-4018-85aa-84a27e87b985\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"2751bebf-70eb-49a0-bea1-ce9a18297e26\",\"z\":151,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"a922e638-9541-451f-b33c-b7962189aabd\",\"port\":\"  \"},\"target\":{\"id\":\"7f6b6c5e-af70-434b-9786-f91ddf27c7d7\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"b6dbbbc3-ded4-4eab-838e-953385a0febb\",\"z\":159,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"6ae458d9-2718-4778-ac42-f7003b5e52fa\",\"port\":\"  \"},\"target\":{\"id\":\"d8fdb2f2-a865-4389-a1af-ca9e03a4cba6\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"8e564618-0b74-429f-8fe8-475b1b242ebf\",\"z\":160,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-447,\"y\":76},\"angle\":0,\"id\":\"0c932f1b-b240-4d34-ba30-e79a2015f71c\",\"z\":168,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"HTTPS Forwarding Rules\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"HTTPS Forwarding Rules\"}}},{\"type\":\"link\",\"source\":{\"id\":\"7f6b6c5e-af70-434b-9786-f91ddf27c7d7\",\"port\":\"  \"},\"target\":{\"id\":\"0c932f1b-b240-4d34-ba30-e79a2015f71c\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"55617978-1fa0-491d-b7bf-e88ece1ff4c4\",\"z\":169,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":-271,\"y\":75},\"angle\":0,\"id\":\"11d69fc8-11cd-48bb-b86d-aa262f51130b\",\"z\":179,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"HTTP Proxy\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"HTTP Proxy\"}}},{\"type\":\"link\",\"source\":{\"id\":\"11d69fc8-11cd-48bb-b86d-aa262f51130b\",\"port\":\"  \"},\"target\":{\"id\":\"6ae458d9-2718-4778-ac42-f7003b5e52fa\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"044558ad-c054-4df8-9078-407b237509d3\",\"z\":181,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"0c932f1b-b240-4d34-ba30-e79a2015f71c\",\"port\":\"  \"},\"target\":{\"id\":\"11d69fc8-11cd-48bb-b86d-aa262f51130b\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"92daafd0-0851-4fa8-bdcd-3535c7afa13b\",\"z\":184,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"c022d3e9-c705-4db8-a815-9b2439927a29\",\"port\":\"  \"},\"target\":{\"id\":\"955b5628-0de1-420f-9483-7d0e74ac2b61\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"1e8b2f13-d7f7-4401-af3b-10bc0747340c\",\"z\":193,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":696,\"y\":66},\"angle\":0,\"id\":\"640635cf-023e-4c06-8b77-66e45483762d\",\"z\":197,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"HTTP-to-HTTPS redirect\"},\".p_id\":{\"text\":\"61ddc8643d948b00323f64c9\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"HTTP-to-HTTPS redirect\"}}},{\"type\":\"link\",\"source\":{\"id\":\"66a3b27b-2c9c-4fd5-ab9c-df91250e30fe\",\"port\":\"  \"},\"target\":{\"id\":\"b63c01cd-3bf1-468f-91bc-e973905f5371\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"f6d85253-a9f0-4b33-a351-f076ef75be63\",\"z\":199,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"779f8c91-4aa5-4ddc-a73c-7c7252e8988a\",\"port\":\"  \"},\"target\":{\"id\":\"640635cf-023e-4c06-8b77-66e45483762d\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"698481ee-fad6-4e10-80d2-c2abb865d838\",\"z\":203,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"b63c01cd-3bf1-468f-91bc-e973905f5371\",\"port\":\"  \"},\"target\":{\"id\":\"a190db8d-6d25-47ca-9f41-6b452c162d3f\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"d10ad01c-e4e2-40f0-9311-de6285d35d52\",\"z\":204,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"779f8c91-4aa5-4ddc-a73c-7c7252e8988a\",\"port\":\"  \"},\"target\":{\"id\":\"d8fdb2f2-a865-4389-a1af-ca9e03a4cba6\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"33f317bd-1f16-4c2a-a182-cb20e11c1358\",\"z\":205,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"a190db8d-6d25-47ca-9f41-6b452c162d3f\",\"port\":\"  \"},\"target\":{\"id\":\"b45c34f4-3936-45de-979f-247c50b2d5aa\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"9831e8c4-879f-4d09-bb23-4c378b62e152\",\"z\":206,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"317675e7-4242-4712-b435-97f804f743dd\",\"port\":\"  \"},\"target\":{\"id\":\"59cc84f2-9a52-4698-a5e6-fa7658128f3b\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"cde578d6-82a1-48a6-9151-899fa91391a5\",\"z\":209,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"b45c34f4-3936-45de-979f-247c50b2d5aa\",\"port\":\"  \"},\"target\":{\"id\":\"c022d3e9-c705-4db8-a815-9b2439927a29\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"2fd8529a-deab-4a8e-a1b8-d1ba25df7b0a\",\"z\":211,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"955b5628-0de1-420f-9483-7d0e74ac2b61\",\"port\":\"  \"},\"target\":{\"id\":\"0f3732f7-d7c0-40b7-a223-f8818dd0b2e6\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"32e4c11d-8dfa-47df-91ea-e169c2d44aa4\",\"z\":212,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"17d2d217-ba89-4c4d-9dcb-af6663060420\",\"port\":\" \"},\"target\":{\"id\":\"66a3b27b-2c9c-4fd5-ab9c-df91250e30fe\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"f09dfcf5-b414-41b5-acbd-df86234ea19a\",\"z\":213,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}}]}","code":"// The directory (folder) the commands will be executed in the agent \r\nconst WORKING_DIR = \"\";\r\n\r\n// Same as the GCP project with the bucket holding the static site \r\nconst PROJECT_ID = \"\";\r\n\r\n// This bucket needs to have a static site on it\r\nconst BUCKET_NAME = \"\";\r\n\r\n// The value name of the JSON Service Account saved in the Vault\r\nconst SECRET_KEY = \"\"\r\n\r\n// Same region the bucket\r\nconst LOCATION = \"\";\r\n\r\n// Change this if you would like a custom name for the backend bucket\r\nconst BACKEND_BUCKET = `backend-${BUCKET_NAME}`\r\n\r\n// This is a domain that you have control of and can change the nameservers \r\nconst PUBLIC_URL = \"\";\r\n\r\n// Name of the DNS Zone. We suggest the name of the domain without the TLD\r\nconst ZONE_NAME = \"\"\r\n\r\n// These variables are up to you to change,\r\n// We suggest something that is easy to look up in GCP for future reference\r\nconst CERTIFICATE_NAME = ZONE_NAME\r\nconst TARGET_HTTPS_PROXY_NAME = \"\"\r\nconst TARGET_HTTP_PROXY_NAME = \"\"\r\nconst IP_NAME = \"\"\r\nconst URL_MAP = \"\"\r\n\r\n// Do not change values below unless you know what you are doing\r\nlet status = actions.sslStatus.result\r\n\r\nasync function import_gcp_profile() {\r\n    const KEY = await kaholo.vault.getValueByKey(SECRET_KEY);\r\n    // This is the name of the file that Service Key will be created in Plain Text. The pipeline should remove it.\r\n    const KEY_FILE = \"service-kaholo.json\";\r\n    return `echo '${KEY}' > ${KEY_FILE}; gcloud auth activate-service-account --key-file ${KEY_FILE}; rm ${KEY_FILE}`;\r\n}\r\n\r\nasync function get_key() {\r\n    return await kaholo.vault.getValueByKey(SECRET_KEY);\r\n}\r\n\r\nfunction set_project() {\r\n    return `gcloud config set project ${PROJECT_ID}`\r\n}\r\n\r\nfunction health_check() {\r\n    return `gcloud compute health-checks create http http-basic-check --port 80`\r\n}\r\n\r\nfunction create_url_maps() {\r\n    return `gcloud compute url-maps create ${URL_MAP} --default-backend-bucket=${BACKEND_BUCKET}`\r\n}\r\n\r\nfunction configure_url_maps() {\r\n    return `gcloud compute url-maps add-path-matcher ${URL_MAP} --path-matcher-name=${URL_MAP}-path-match  --default-backend-bucket=${BACKEND_BUCKET}`\r\n}\r\n\r\nfunction create_backend_bucket() {\r\n    return `gcloud compute backend-buckets create ${BACKEND_BUCKET} --gcs-bucket-name=${BUCKET_NAME}`\r\n}\r\n\r\nfunction update_backend_bucket() {\r\n    return `gcloud compute backend-buckets update ${BACKEND_BUCKET} --gcs-bucket-name=${BUCKET_NAME}`\r\n}\r\n\r\nfunction create_ip() {\r\n    return `gcloud compute addresses create ${IP_NAME} --network-tier=PREMIUM --ip-version=IPV4 --global`\r\n}\r\n\r\nfunction output_ip() {\r\n    return `gcloud compute addresses describe ${IP_NAME} --format=\"get(address)\" --global`\r\n}\r\n\r\nfunction get_ip() {\r\n    return actions.outputIp.result\r\n}\r\n\r\n// This one requires an SSL and URL Map\r\nfunction create_https_target_proxy() {\r\n    return `gcloud compute target-https-proxies create ${TARGET_HTTPS_PROXY_NAME} --ssl-certificates=${CERTIFICATE_NAME} --url-map=${URL_MAP}`\r\n}\r\n\r\nfunction create_http_target_proxy() {\r\n    return `gcloud compute target-http-proxies create http-proxy --url-map=${URL_MAP}`\r\n}\r\n\r\nfunction verify_target_proxy() {\r\n    return `gcloud compute target-https-proxies describe ${TARGET_HTTPS_PROXY_NAME}  --global --format=\"get(sslCertificates)\"`\r\n}\r\n\r\nfunction create_ssl() {\r\n    return `gcloud compute ssl-certificates create ${CERTIFICATE_NAME} --description=\"SSL for ${PUBLIC_URL}\" --global --domains=${PUBLIC_URL}`\r\n}\r\n\r\nfunction create_https_forwarding_rules() {\r\n    return `gcloud compute forwarding-rules create ${URL_MAP}-https ` +\r\n        `--load-balancing-scheme=EXTERNAL ` +\r\n        `--network-tier=PREMIUM ` +\r\n        `--address=${get_ip()} ` +\r\n        `--global ` +\r\n        `--target-https-proxy=${TARGET_HTTPS_PROXY_NAME} ` +\r\n        `--ports=443`\r\n}\r\n\r\nfunction create_http_forwarding_rules() {\r\n    return `gcloud compute forwarding-rules create ${URL_MAP}-http ` +\r\n        `--load-balancing-scheme=EXTERNAL ` +\r\n        `--network-tier=PREMIUM ` +\r\n        `--address=${get_ip()} ` +\r\n        `--global ` +\r\n        `--target-http-proxy=${TARGET_HTTP_PROXY_NAME} ` +\r\n        `--ports=80`\r\n}\r\n\r\nfunction create_dns_zone() {\r\n    return `gcloud dns managed-zones create ${ZONE_NAME} --dns-name ${PUBLIC_URL} --description \"Zone for ${PUBLIC_URL}\" --dnssec-state=on`\r\n}\r\n\r\nfunction create_a_record() {\r\n    return `gcloud dns record-sets create ${PUBLIC_URL} --rrdatas=${get_ip()} --type=A --ttl=60 --zone=${ZONE_NAME}`\r\n}\r\n\r\nfunction create_cname_record() {\r\n    return `gcloud dns record-sets transaction add -z=${ZONE_NAME} --type=CNAME --name=www.${PUBLIC_URL} --ttl 60 ${PUBLIC_URL}`\r\n}\r\n\r\nfunction ssl_status() {\r\n    return `gcloud compute ssl-certificates describe ${CERTIFICATE_NAME} --global --format=\"get(managed.status)\"`\r\n}\r\n\r\nfunction create_http_to_https_redirect() {\r\n    return `gcloud compute backend-buckets update ${BACKEND_BUCKET} --custom-response-header='Strict-Transport-Security: max-age=31536000; preload'`\r\n}\r\n\r\n\r\n\r\n\r\n","plugins":[],"processes":[{"id":"61f8a8153d948b00324a5f96","uuid":"66a3b27b-2c9c-4fd5-ab9c-df91250e30fe","codeId":"commandline1","name":"Configure gsutils","description":"Import the Service account into the command","mandatory":false,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Configure gsutils","mandatory":false,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"import_gcp_profile();","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":"/bin/bash","code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fa09bf3d948b00324b019c","uuid":"8bced2be-aa05-4018-85aa-84a27e87b985","codeId":"commandline8","name":"Create URL map","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Create URL map","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_url_maps()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97b3","uuid":"b63c01cd-3bf1-468f-91bc-e973905f5371","codeId":"commandline10","name":"Set Project","description":"Set the specific project","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Set Project","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"set_project()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97b9","uuid":"59cc84f2-9a52-4698-a5e6-fa7658128f3b","codeId":"commandline11","name":"Create Backend Backet","description":"This backend bucket routes to our bucket with the static site on it","mandatory":false,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Create Backend Backet","mandatory":false,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_backend_bucket()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97bf","uuid":"a2e4bf34-453c-4f0b-b100-2340cf7836dd","codeId":"commandline12","name":"Configure URL map","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Configure URL map","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"configure_url_maps()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97c5","uuid":"7f6b6c5e-af70-434b-9786-f91ddf27c7d7","codeId":"commandline13","name":"HTTPS Target Proxy","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"HTTPS Target Proxy","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_https_target_proxy()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97cb","uuid":"6ae458d9-2718-4778-ac42-f7003b5e52fa","codeId":"commandline14","name":"HTTP Create Forwarding Rules","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"HTTP Create Forwarding Rules","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_http_forwarding_rules()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97d1","uuid":"c022d3e9-c705-4db8-a815-9b2439927a29","codeId":"commandline15","name":"Create IP","description":"","mandatory":false,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Create IP","mandatory":false,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_ip()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97d7","uuid":"955b5628-0de1-420f-9483-7d0e74ac2b61","codeId":"outputIp","name":"Output IP","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Output IP","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"output_ip()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97dd","uuid":"a922e638-9541-451f-b33c-b7962189aabd","codeId":"commandline16","name":"Create SSL","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Create SSL","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_ssl()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97e3","uuid":"0f3732f7-d7c0-40b7-a223-f8818dd0b2e6","codeId":"commandline17","name":"Create Zone","description":"","mandatory":false,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Create Zone","mandatory":false,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_dns_zone()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"61fb5bf93d948b00324b97e9","uuid":"317675e7-4242-4712-b435-97f804f743dd","codeId":"commandline18","name":"Create A","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Create A","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_a_record()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"620d87de677ed00032ad43e9","uuid":"d8fdb2f2-a865-4389-a1af-ca9e03a4cba6","codeId":"sslStatus","name":"Check SSL Status","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Check SSL Status","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"ssl_status()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":true,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"620d87de677ed00032ad43ef","uuid":"779f8c91-4aa5-4ddc-a73c-7c7252e8988a","codeId":"waitForSsl","name":"Wait if SSL is provisiong","description":"","mandatory":true,"coordination":"","condition":"status !== \"ACTIVE\"","preRun":"","postRun":"status = actions.sslStatus.result","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":7200000,"name":"Wait if SSL is provisiong","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"echo \"waiting for ssl\"; sleep 60;","code":null,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":true,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"620d87de677ed00032ad43f5","uuid":"a190db8d-6d25-47ca-9f41-6b452c162d3f","codeId":"gcpservices1","name":"Enable Compute Service","description":"Enable the compute servcie","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Enable Compute Service","mandatory":true,"method":"serviceEnable","params":[{"value":"GCP Service Account (kaholo)","code":null,"id":"61ddc8953d948b00323f6777","_id":"61ddc8953d948b00323f6777","language":null,"viewName":"Credentials","name":"CREDENTIALS","required":false,"param":"61ddc8953d948b00323f6777","type":"vault"},{"value":"PROJECT_ID","code":true,"id":"61ddc8953d948b00323f6778","_id":"61ddc8953d948b00323f6778","language":null,"viewName":"Project ID","name":"PROJECTID","required":false,"param":"61ddc8953d948b00323f6778","type":"string"},{"value":"compute.googleapis.com","code":null,"id":"61ddc8953d948b00323f6779","_id":"61ddc8953d948b00323f6779","language":null,"viewName":"Service","name":"SERVICE","required":false,"param":"61ddc8953d948b00323f6779","type":"string"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"GCP-Services","version":"1.0.1"},"correlateAgents":null,"numProcessParallel":""},{"id":"620e624f677ed00032ada46d","uuid":"b45c34f4-3936-45de-979f-247c50b2d5aa","codeId":"gcpservices2","name":"Enable DNS Service","description":"Cloud DNS allows us to create a public DNS record to resolve our domain name to the static bucket","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Enable DNS Service","mandatory":true,"method":"serviceEnable","params":[{"value":"GCP Service Account (kaholo)","code":null,"id":"61ddc8953d948b00323f6777","_id":"61ddc8953d948b00323f6777","language":null,"viewName":"Credentials","name":"CREDENTIALS","required":false,"param":"61ddc8953d948b00323f6777","type":"vault"},{"value":"PROJECT_ID","code":true,"id":"61ddc8953d948b00323f6778","_id":"61ddc8953d948b00323f6778","language":null,"viewName":"Project ID","name":"PROJECTID","required":false,"param":"61ddc8953d948b00323f6778","type":"string"},{"value":"dns.googleapis.com","code":null,"id":"61ddc8953d948b00323f6779","_id":"61ddc8953d948b00323f6779","language":null,"viewName":"Service","name":"SERVICE","required":false,"param":"61ddc8953d948b00323f6779","type":"string"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"GCP-Services","version":"1.0.1"},"correlateAgents":null,"numProcessParallel":""},{"id":"620efbd4a311900032d7c48d","uuid":"0c932f1b-b240-4d34-ba30-e79a2015f71c","codeId":"commandline31","name":"HTTPS Forwarding Rules","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"HTTPS Forwarding Rules","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_https_forwarding_rules()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"620efe96a311900032d7ca25","uuid":"11d69fc8-11cd-48bb-b86d-aa262f51130b","codeId":"commandline32","name":"HTTP Proxy","description":"Note that we also need an HTTP proxy to verify our SSL","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"HTTP Proxy","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_http_target_proxy()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"620fc557a311900032d829a7","uuid":"640635cf-023e-4c06-8b77-66e45483762d","codeId":"commandline34","name":"HTTP-to-HTTPS redirect","description":"Creates a custom response header \"Strict-Transport-Security\" defined in the backend bucket: \n\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security","mandatory":true,"coordination":"","condition":"status === \"ACTIVE\"","preRun":"","postRun":"status = actions.sslStatus.result","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"HTTP-to-HTTPS redirect","mandatory":true,"method":"execute","params":[{"value":"WORKING_DIR","code":true,"id":"61ddc8643d948b00323f64cb","_id":"61ddc8643d948b00323f64cb","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61ddc8643d948b00323f64cb","type":"string"},{"value":"create_http_to_https_redirect()","code":true,"id":"61ddc8643d948b00323f64cc","_id":"61ddc8643d948b00323f64cc","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61ddc8643d948b00323f64cc","type":"string"},{"value":true,"code":null,"id":"61ddc8643d948b00323f64cd","_id":"61ddc8643d948b00323f64cd","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61ddc8643d948b00323f64cd","type":"boolean"},{"value":null,"code":null,"id":"61ddc8643d948b00323f64ce","_id":"61ddc8643d948b00323f64ce","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61ddc8643d948b00323f64ce","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""}],"configurations":[],"links":[{"uuid":"b2740217-48ec-4681-b38c-ed21e3a969be","sourceId":"8bced2be-aa05-4018-85aa-84a27e87b985","targetId":"a2e4bf34-453c-4f0b-b100-2340cf7836dd"},{"uuid":"74f31b0d-a9f8-4f71-807b-14a4e6a32705","sourceId":"0f3732f7-d7c0-40b7-a223-f8818dd0b2e6","targetId":"317675e7-4242-4712-b435-97f804f743dd"},{"uuid":"f9e21d7c-f330-49f8-92bf-a309170012d7","sourceId":"a2e4bf34-453c-4f0b-b100-2340cf7836dd","targetId":"a922e638-9541-451f-b33c-b7962189aabd"},{"uuid":"d1a2c360-827a-467e-b7da-c9b4a4441d24","sourceId":"d8fdb2f2-a865-4389-a1af-ca9e03a4cba6","targetId":"779f8c91-4aa5-4ddc-a73c-7c7252e8988a"},{"uuid":"2751bebf-70eb-49a0-bea1-ce9a18297e26","sourceId":"59cc84f2-9a52-4698-a5e6-fa7658128f3b","targetId":"8bced2be-aa05-4018-85aa-84a27e87b985"},{"uuid":"b6dbbbc3-ded4-4eab-838e-953385a0febb","sourceId":"a922e638-9541-451f-b33c-b7962189aabd","targetId":"7f6b6c5e-af70-434b-9786-f91ddf27c7d7"},{"uuid":"8e564618-0b74-429f-8fe8-475b1b242ebf","sourceId":"6ae458d9-2718-4778-ac42-f7003b5e52fa","targetId":"d8fdb2f2-a865-4389-a1af-ca9e03a4cba6"},{"uuid":"55617978-1fa0-491d-b7bf-e88ece1ff4c4","sourceId":"7f6b6c5e-af70-434b-9786-f91ddf27c7d7","targetId":"0c932f1b-b240-4d34-ba30-e79a2015f71c"},{"uuid":"044558ad-c054-4df8-9078-407b237509d3","sourceId":"11d69fc8-11cd-48bb-b86d-aa262f51130b","targetId":"6ae458d9-2718-4778-ac42-f7003b5e52fa"},{"uuid":"92daafd0-0851-4fa8-bdcd-3535c7afa13b","sourceId":"0c932f1b-b240-4d34-ba30-e79a2015f71c","targetId":"11d69fc8-11cd-48bb-b86d-aa262f51130b"},{"uuid":"1e8b2f13-d7f7-4401-af3b-10bc0747340c","sourceId":"c022d3e9-c705-4db8-a815-9b2439927a29","targetId":"955b5628-0de1-420f-9483-7d0e74ac2b61"},{"uuid":"f6d85253-a9f0-4b33-a351-f076ef75be63","sourceId":"66a3b27b-2c9c-4fd5-ab9c-df91250e30fe","targetId":"b63c01cd-3bf1-468f-91bc-e973905f5371"},{"uuid":"698481ee-fad6-4e10-80d2-c2abb865d838","sourceId":"779f8c91-4aa5-4ddc-a73c-7c7252e8988a","targetId":"640635cf-023e-4c06-8b77-66e45483762d"},{"uuid":"d10ad01c-e4e2-40f0-9311-de6285d35d52","sourceId":"b63c01cd-3bf1-468f-91bc-e973905f5371","targetId":"a190db8d-6d25-47ca-9f41-6b452c162d3f"},{"uuid":"33f317bd-1f16-4c2a-a182-cb20e11c1358","sourceId":"779f8c91-4aa5-4ddc-a73c-7c7252e8988a","targetId":"d8fdb2f2-a865-4389-a1af-ca9e03a4cba6"},{"uuid":"9831e8c4-879f-4d09-bb23-4c378b62e152","sourceId":"a190db8d-6d25-47ca-9f41-6b452c162d3f","targetId":"b45c34f4-3936-45de-979f-247c50b2d5aa"},{"uuid":"cde578d6-82a1-48a6-9151-899fa91391a5","sourceId":"317675e7-4242-4712-b435-97f804f743dd","targetId":"59cc84f2-9a52-4698-a5e6-fa7658128f3b"},{"uuid":"2fd8529a-deab-4a8e-a1b8-d1ba25df7b0a","sourceId":"b45c34f4-3936-45de-979f-247c50b2d5aa","targetId":"c022d3e9-c705-4db8-a815-9b2439927a29"},{"uuid":"32e4c11d-8dfa-47df-91ea-e169c2d44aa4","sourceId":"955b5628-0de1-420f-9483-7d0e74ac2b61","targetId":"0f3732f7-d7c0-40b7-a223-f8818dd0b2e6"},{"uuid":"f09dfcf5-b414-41b5-acbd-df86234ea19a","sourceId":"17d2d217-ba89-4c4d-9dcb-af6663060420","targetId":"66a3b27b-2c9c-4fd5-ab9c-df91250e30fe"}],"used_plugins":[{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"GCP-Services","version":"1.0.1"},{"name":"GCP-Services","version":"1.0.1"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"}],"exportedPipeline":{"description":"# HTTPS Load Balancing on GCP\n\nTo understand how this pipeline is created on GCP,  see this [page](https://cloud.google.com/iap/docs/load-balancer-howto)\n\n## Requirements:  \n- Existing static site on GCP bucket. You can use this template here to create on: \n  - Note the bucket name needs to be the same on this code layer\n- *Clear all resources with the same name that you are going to be using*\n  - If you have a resource with the same name, it will fail the pipeline\n- Once the DNS zones are craeted, you will need to update the domains nameservers on the registrar. Go to the Cloud DNS to find the nameserver GCP has created \n\n## Code Layer\nThe code layer has variables that need to be filled in for this pipeline to work. Please view the code layer and read the comments to execute this pipeline properly","queue":null}}